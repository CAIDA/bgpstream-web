BGPReader Tutorial
==================

<h1 class="text-danger">TODO: UPDATE THIS DOCUMENT</h1>

~~~

$ bgpreader -w<start>[,<stop>] [-p <project] [-t <type] [-c collector] [-r] [-m] [-e] [-d <interface>] [-o<option-name>,<option-value>]

~~~

 * When no data interface is specified, the broker is selected as default.
 * When no projects are specified, all projects are assumed as valid.
 * When no types are specified, all types are assumed as  valid.
 * When no collectors are specified, all collectors are assumed as valid.

### Print all the BGP elems observed by RIS collectors updates in 2 minutes

The following command outputs the BGPStream elems contained in the
BGPStream records that comply with the following filters:

 * are contained in ___Updates dumps___ generated by ___RIS collectors___
 * their timestamp is in the interval ___Sat, 10 Oct 2015 17:34:00 GMT___ -  ___Sat, 10 Oct 2015 17:36:00 GMT___

~~~

$ bgpreader -w1444498440,1444498560 -p ris -t updates -e

1444498440|80.81.192.74|13237|A|212.93.166.0/24|80.81.192.74|13237 1299 174 39386 39386 39386 39386 39919|39919||
1444498440|80.81.192.74|13237|A|91.151.162.0/24|80.81.192.74|13237 1299 174 39386 39386 39386 39386 39919|39919||
1444498440|80.81.192.74|13237|A|212.93.177.0/24|80.81.192.74|13237 1299 174 39386 39386 39386 39386 39919|39919||
...
1444498560|80.81.192.74|13237|A|214.13.75.0/24|80.81.192.74|13237 1299 209 721 27065 1733 27067 5800|5800||
1444498560|80.81.192.74|13237|A|214.26.240.0/24|80.81.192.74|13237 1299 209 721 27065 1733 27067 5800|5800||
1444498560|80.81.194.140|25220|A|214.26.240.0/24|80.81.194.140|25220 3356 209 721 27065 1733 27067 5800|5800||
1444498560|80.81.194.140|25220|A|214.13.75.0/24|80.81.194.140|25220 3356 209 721 27065 1733 27067 5800|5800||

~~~

The above command outputs 181,118 announcements,  151 state messages,
and 7,882 withdrawals as observed by 13 collectors (and 209 unique
peer ASns).



### Print all the BGP elems observed by Route Views Linx updates in 1 second using the bgpdump format


The following command outputs (using the bgpdump -m format) the BGPStream elems contained in the
BGPStream records that comply with the following filters:

 * are contained in ___Updates dumps___ generated by the ___Route Views
   LINX collector___
 * their timestamp is exactly  ___Sat, 10 Oct 2015 17:34:02 GMT___ 

~~~

$ bgpreader -w1444498442,1444498442 -c route-views.linx -m

BGP4MP|1444498442|A|195.66.224.175|13030|46.219.122.0/24|13030 5580 21011 31148 31148 31148|IGP|195.66.224.175|0|1|65123:276 65123:2000 65123:2002 65123:10016 13030:1 13030:7208 13030:50000 13030:51107|AG|31148 94.76.105.10|
BGP4MP|1444498442|W|195.66.224.138|2914|209.212.8.0/24
BGP4MP|1444498442|W|195.66.224.138|2914|205.151.210.0/23
...
BGP4MP|1444498442|A|195.66.236.175|13030|118.193.51.0/24|13030 2828 10026 17444 17444 133115|IGP|195.66.236.175|0|1|13030:2 13030:2828 13030:51903 13030:7215|NAG||
BGP4MP|1444498442|A|195.66.236.175|13030|177.154.84.0/22|13030 12989 28640 262401 262401 262401 262401 262401 262401 262401 262401 262949|IGP|195.66.236.175|0|1|13030:1 13030:3 13030:50000 13030:51502 13030:7209|NAG||
BGP4MP|1444498442|A|195.66.236.175|13030|177.154.80.0/22|13030 12989 28640 262401 262401 262401 262401 262401 262401 262401 262401 262949|IGP|195.66.236.175|0|1|13030:1 13030:3 13030:50000 13030:51502 13030:7209|NAG||

~~~

The above command outputs 114  announcements,  and 11 withdrawals as
observed by 14 unique peer ASns.


### Print all the BGP elems observed by RRC00 in real-time

The following command outputs the BGPStream elems contained in the
BGPStream records that comply with the following filters:

 * are contained in ___RIBs___ and ___ Updates dumps___ generated by    the ___RIS RRC00 collector___
 * their timestamp is greater or equal to  ___Sat, 15 Oct 2015 17:12:00 GMT___ 

~~~

$ bgpreader -w1444929120 -c rrc00 -e

1444929120|2a01:2a8::3|1836|A|2c0f:fe90::/32|2a01:2a8::3|1836 174 6453 30844 37105 37105 37105 36943|36943||
1444929120|2a01:2a8::3|1836|A|2c0f:fe90::/32|2a01:2a8::3|1836 6939 30844 37105 37105 37105 36943|36943||
1444929120|146.228.1.3|1836|A|168.128.104.0/21|146.228.1.3|1836 3356 2914 44568 44568|44568||
...

~~~

The above command continuosly (i.e. as soon as data are available to
the BGPStream broker) outputs BGPStream elem associated with RRC 00
generated BGPStream records. 



### Print all the BGP records generated by RIS RRC04 and RRC05 in a day

The following command outputs information about the BGPStream records that comply with the following filters:

 * are contained in ___RIBs___ and ___ Updates dumps___ generated by
   the ___RIS RRC04___ and ___RIS RRC05 collectors___
 * their timestamp is in the interval ___Sat, 10 Oct 2015 00:00:00  GMT___ -  ___Sat, 10 Oct 2015 23:59:59 GMT___

~~~

$ bgpreader -w1444435200,1444521599 -c rrc04 -c rrc05 -r

1444434900|ris|rrc05|update|filtered_source|1444434900|end|
1444435200|ris|rrc05|rib|valid_record|1444435200|start|
1444435200|ris|rrc04|rib|valid_record|1444435200|start|
1444435200|ris|rrc05|rib|valid_record|1444435200|middle|
1444435200|ris|rrc04|rib|valid_record|1444435200|middle|
...
1444521599|ris|rrc04|update|valid_record|1444521300|middle|
1444521599|ris|rrc04|update|valid_record|1444521300|middle|
1444521599|ris|rrc04|update|valid_record|1444521300|middle|
~~~

The above command outputs information about 3,524,048 BGPStream
records of type rib and 4,384,306 BGPStream records of type update.


